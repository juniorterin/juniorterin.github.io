function words_load(){localStorage.jqspritz?(local_spritz=JSON.parse(localStorage.jqspritz),$words.val(local_spritz.words),i=local_spritz.word,local_spritz.night&&(night=!0,$("html").addClass("night")),local_spritz.autosave&&(autosave=!0,$("html").addClass("autosave"),$("#autosave_checkbox").prop("checked",!0)),$wpm.val(local_spritz.wpm),interval=6e4/local_spritz.wpm,spritz_zoom(0),words_set(),word_show(i),word_update(),spritz_pause(!0),spritz_alert("loaded")):(words_set(),word_show(0),word_update(),spritz_pause(!0))}function words_save(){local_spritz={word:i,words:$words.val(),wpm:$wpm.val(),night:night,autosave:autosave,zoom:zoom},localStorage.jqspritz=JSON.stringify(local_spritz),autosave?button_flash("save",500):spritz_alert("saved")}function words_set(){words=$words.val().trim().replace(/([-\u2014])(\w)/g,"$1 $2").replace(/[\r\n]/g," {linebreak} ").replace(/[ \t]{2,}/g," ").split(" ");for(var a=1;a<words.length;a++)words[a]=words[a].replace(/{linebreak}/g,"   ")}function word_show(a){$("#spritz_progress").width(100*a/words.length+"%");var b=words[a],c=Math.round(.4*(b.length+1))-1;$space.html("<div>"+b.slice(0,c)+"</div><div>"+b[c]+"</div><div>"+b.slice(c+1)+"</div>")}function word_next(){i++,word_show(i)}function word_prev(){i--,word_show(i)}function word_update(){spritz=setInterval(function(){word_next(),i+1==words.length&&(setTimeout(function(){$space.html(""),spritz_pause(!0),i=0,word_show(0)},interval),clearInterval(spritz))},interval)}function spritz_pause(a){paused||(clearInterval(spritz),paused=!0,$("html").addClass("paused"),autosave&&!a&&words_save())}function spritz_play(){word_update(),paused=!1,$("html").removeClass("paused")}function spritz_flip(){paused?spritz_play():spritz_pause()}function spritz_speed(){interval=6e4/$("#spritz_wpm").val(),paused||(clearInterval(spritz),word_update()),$("#spritz_save").removeClass("saved loaded")}function spritz_faster(){$("#spritz_wpm").val(parseInt($("#spritz_wpm").val())+50),spritz_speed()}function spritz_slower(){$("#spritz_wpm").val()>=100&&$("#spritz_wpm").val(parseInt($("#spritz_wpm").val())-50),spritz_speed()}function spritz_back(){spritz_pause(),i>=1&&word_prev()}function spritz_forward(){spritz_pause(),i<words.length&&word_next()}function spritz_zoom(a){zoom+=a,$("#spritz").css("font-size",zoom+"em")}function spritz_refresh(){clearInterval(spritz),words_set(),i=0,spritz_pause(),word_show(0)}function spritz_select(){$words.select()}function spritz_expand(){$("html").toggleClass("fullscreen")}function spritz_autosave(){$("html").toggleClass("autosave"),autosave=!autosave,autosave?$("#autosave_checkbox").prop("checked",!0):$("#autosave_checkbox").prop("checked",!1)}function spritz_alert(a){var b="";switch(a){case"loaded":b="Dados locais carregados";break;case"saved":b="Suas palavras, posi\xe7\xe3o e configura\xe7\xf5es foram salvas para sua pr\xf3xima visita"}$("#alert").text(b).fadeIn().delay(2e3).fadeOut()}function button_flash(a,b){var c=$(".controls a."+a);c.addClass("active"),"undefined"==typeof b&&(b=100),setTimeout(function(){c.removeClass("active")},b)}!function(a,b,c,d,e,f,g){a.GoogleAnalyticsObject=e,a[e]=a[e]||function(){(a[e].q=a[e].q||[]).push(arguments)},a[e].l=1*new Date,f=b.createElement(c),g=b.getElementsByTagName(c)[0],f.async=1,f.src=d,g.parentNode.insertBefore(f,g)}(window,document,"script","https://www.google-analytics.com/analytics.js","ga"),ga("create","UA-34221412-2","auto"),ga("send","pageview");var $wpm=$("#spritz_wpm"),interval=6e4/$wpm.val(),paused=!1,$space=$("#spritz_word"),i=0,night=!1,zoom=1,autosave=!1,$words=$("#spritz_words"),local_spritz={};$("#spritz_wpm").on("input",function(){spritz_speed()}),$(".controls").on("click","a, label",function(){switch(this.id){case"spritz_slower":spritz_slower();break;case"spritz_faster":spritz_faster();break;case"spritz_save":words_save();break;case"spritz_pause":spritz_flip();break;case"spritz_smaller":spritz_zoom(-.1);break;case"spritz_bigger":spritz_zoom(.1);break;case"spritz_autosave":spritz_autosave();break;case"spritz_refresh":spritz_refresh();break;case"spritz_select":spritz_select();break;case"spritz_expand":spritz_expand()}return!1}),$(".controls").on("mousedown","a",function(){switch(this.id){case"spritz_back":spritz_jog_back=setInterval(function(){spritz_back()},100);break;case"spritz_forward":spritz_jog_forward=setInterval(function(){spritz_forward()},100)}}),$(".controls").on("mouseup","a",function(){switch(this.id){case"spritz_back":clearInterval(spritz_jog_back);break;case"spritz_forward":clearInterval(spritz_jog_forward)}}),$(document).on("keyup",function(a){if("body"==a.target.tagName.toLowerCase())switch(a.keyCode){case 32:spritz_flip(),button_flash("pause");break;case 37:spritz_back(),button_flash("back");break;case 38:spritz_faster(),button_flash("faster");break;case 39:spritz_forward(),button_flash("forward");break;case 40:spritz_slower(),button_flash("slower")}}),$(document).on("keydown",function(a){if("body"==a.target.tagName.toLowerCase())switch(a.keyCode){case 37:spritz_back(),button_flash("back");break;case 39:spritz_forward(),button_flash("forward")}}),words_load(),$(".light").on("click",function(){return $("html").toggleClass("night"),night=!night,!1}),$("a.toggle").on("click",function(){return $(this).siblings(".togglable").slideToggle(),!1});